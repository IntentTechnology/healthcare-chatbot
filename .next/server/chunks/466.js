exports.id=466,exports.ids=[466],exports.modules={9557:e=>{"use strict";let t="undefined"!=typeof Buffer,r=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,o=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function n(e,n,l){null==l&&null!==n&&"object"==typeof n&&(l=n,n=void 0),t&&Buffer.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let s=JSON.parse(e,n);if(null===s||"object"!=typeof s)return s;let i=l&&l.protoAction||"error",c=l&&l.constructorAction||"error";if("ignore"===i&&"ignore"===c)return s;if("ignore"!==i&&"ignore"!==c){if(!1===r.test(e)&&!1===o.test(e))return s}else if("ignore"!==i&&"ignore"===c){if(!1===r.test(e))return s}else if(!1===o.test(e))return s;return a(s,{protoAction:i,constructorAction:c,safe:l&&l.safe})}function a(e,{protoAction:t="error",constructorAction:r="error",safe:o}={}){let n=[e];for(;n.length;){let e=n;for(let a of(n=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(a,"__proto__")){if(!0===o)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete a.__proto__}if("ignore"!==r&&Object.prototype.hasOwnProperty.call(a,"constructor")&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype")){if(!0===o)return null;if("error"===r)throw SyntaxError("Object contains forbidden prototype property");delete a.constructor}for(let e in a){let t=a[e];t&&"object"==typeof t&&n.push(t)}}}return e}function l(e,t,r){let o=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return n(e,t,r)}finally{Error.stackTraceLimit=o}}e.exports=l,e.exports.default=l,e.exports.parse=l,e.exports.safeParse=function(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return n(e,t,{safe:!0})}catch(e){return null}finally{Error.stackTraceLimit=r}},e.exports.scan=a},4895:e=>{e.exports=function(e,t){let r;if("function"!=typeof e)throw TypeError(`Expected the first argument to be a \`function\`, got \`${typeof e}\`.`);let o=0;return function(...n){clearTimeout(r);let a=Date.now(),l=t-(a-o);l<=0?(o=a,e.apply(this,n)):r=setTimeout(()=>{o=Date.now(),e.apply(this,n)},l)}}},7427:(e,t,r)=>{"use strict";var o=r(8964),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=o.useState,l=o.useEffect,s=o.useLayoutEffect,i=o.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!n(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),o=a({inst:{value:r,getSnapshot:t}}),n=o[0].inst,u=o[1];return s(function(){n.value=r,n.getSnapshot=t,c(n)&&u({inst:n})},[e,r,t]),l(function(){return c(n)&&u({inst:n}),e(function(){c(n)&&u({inst:n})})},[e]),i(r),r};t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:u},4455:(e,t,r)=>{"use strict";e.exports=r(7427)},1166:(e,t,r)=>{"use strict";r.d(t,{Ns:()=>X,fC:()=>z,gb:()=>_,q4:()=>O,l_:()=>H});var o=r(8964),n=r(2251),a=r(7264),l=r(732),s=r(3191),i=r(5090),c=r(1310),u=r(9537),d=r(319),p=r(7247),f="ScrollArea",[h,g]=(0,l.b)(f),[m,E]=h(f),y=o.forwardRef((e,t)=>{let{__scopeScrollArea:r,type:a="hover",dir:l,scrollHideDelay:i=600,...u}=e,[d,f]=o.useState(null),[h,g]=o.useState(null),[E,y]=o.useState(null),[v,b]=o.useState(null),[w,_]=o.useState(null),[I,S]=o.useState(0),[T,R]=o.useState(0),[A,C]=o.useState(!1),[N,x]=o.useState(!1),k=(0,s.e)(t,e=>f(e)),D=(0,c.gm)(l);return(0,p.jsx)(m,{scope:r,type:a,dir:D,scrollHideDelay:i,scrollArea:d,viewport:h,onViewportChange:g,content:E,onContentChange:y,scrollbarX:v,onScrollbarXChange:b,scrollbarXEnabled:A,onScrollbarXEnabledChange:C,scrollbarY:w,onScrollbarYChange:_,scrollbarYEnabled:N,onScrollbarYEnabledChange:x,onCornerWidthChange:S,onCornerHeightChange:R,children:(0,p.jsx)(n.WV.div,{dir:D,...u,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":I+"px","--radix-scroll-area-corner-height":T+"px",...e.style}})})});y.displayName=f;var v="ScrollAreaViewport",b=o.forwardRef((e,t)=>{let{__scopeScrollArea:r,children:a,nonce:l,...i}=e,c=E(v,r),u=o.useRef(null),d=(0,s.e)(t,u,c.onViewportChange);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),(0,p.jsx)(n.WV.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,p.jsx)("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});b.displayName=v;var w="ScrollAreaScrollbar",_=o.forwardRef((e,t)=>{let{forceMount:r,...n}=e,a=E(w,e.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:s}=a,i="horizontal"===e.orientation;return o.useEffect(()=>(i?l(!0):s(!0),()=>{i?l(!1):s(!1)}),[i,l,s]),"hover"===a.type?(0,p.jsx)(I,{...n,ref:t,forceMount:r}):"scroll"===a.type?(0,p.jsx)(S,{...n,ref:t,forceMount:r}):"auto"===a.type?(0,p.jsx)(T,{...n,ref:t,forceMount:r}):"always"===a.type?(0,p.jsx)(R,{...n,ref:t}):null});_.displayName=w;var I=o.forwardRef((e,t)=>{let{forceMount:r,...n}=e,l=E(w,e.__scopeScrollArea),[s,i]=o.useState(!1);return o.useEffect(()=>{let e=l.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),i(!0)},o=()=>{t=window.setTimeout(()=>i(!1),l.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",o),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",o)}}},[l.scrollArea,l.scrollHideDelay]),(0,p.jsx)(a.z,{present:r||s,children:(0,p.jsx)(T,{"data-state":s?"visible":"hidden",...n,ref:t})})}),S=o.forwardRef((e,t)=>{var r,n;let{forceMount:l,...s}=e,i=E(w,e.__scopeScrollArea),c="horizontal"===e.orientation,u=Y(()=>h("SCROLL_END"),100),[f,h]=(r="hidden",n={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},o.useReducer((e,t)=>n[e][t]??e,r));return o.useEffect(()=>{if("idle"===f){let e=window.setTimeout(()=>h("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[f,i.scrollHideDelay,h]),o.useEffect(()=>{let e=i.viewport,t=c?"scrollLeft":"scrollTop";if(e){let r=e[t],o=()=>{let o=e[t];r!==o&&(h("SCROLL"),u()),r=o};return e.addEventListener("scroll",o),()=>e.removeEventListener("scroll",o)}},[i.viewport,c,h,u]),(0,p.jsx)(a.z,{present:l||"hidden"!==f,children:(0,p.jsx)(R,{"data-state":"hidden"===f?"hidden":"visible",...s,ref:t,onPointerEnter:(0,d.M)(e.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:(0,d.M)(e.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),T=o.forwardRef((e,t)=>{let r=E(w,e.__scopeScrollArea),{forceMount:n,...l}=e,[s,i]=o.useState(!1),c="horizontal"===e.orientation,u=Y(()=>{if(r.viewport){let e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;i(c?e:t)}},10);return $(r.viewport,u),$(r.content,u),(0,p.jsx)(a.z,{present:n||s,children:(0,p.jsx)(R,{"data-state":s?"visible":"hidden",...l,ref:t})})}),R=o.forwardRef((e,t)=>{let{orientation:r="vertical",...n}=e,a=E(w,e.__scopeScrollArea),l=o.useRef(null),s=o.useRef(0),[i,c]=o.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=M(i.viewport,i.content),d={...n,sizes:i,onSizesChange:c,hasThumb:!!(u>0&&u<1),onThumbChange:e=>l.current=e,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:e=>s.current=e};function f(e,t){return function(e,t,r,o="ltr"){let n=U(r),a=t||n/2,l=r.scrollbar.paddingStart+a,s=r.scrollbar.size-r.scrollbar.paddingEnd-(n-a),i=r.content-r.viewport;return W([l,s],"ltr"===o?[0,i]:[-1*i,0])(e)}(e,s.current,i,t)}return"horizontal"===r?(0,p.jsx)(A,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&l.current){let e=B(a.viewport.scrollLeft,i,a.dir);l.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollLeft=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollLeft=f(e,a.dir))}}):"vertical"===r?(0,p.jsx)(C,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&l.current){let e=B(a.viewport.scrollTop,i);l.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollTop=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollTop=f(e))}}):null}),A=o.forwardRef((e,t)=>{let{sizes:r,onSizesChange:n,...a}=e,l=E(w,e.__scopeScrollArea),[i,c]=o.useState(),u=o.useRef(null),d=(0,s.e)(t,u,l.onScrollbarXChange);return o.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),(0,p.jsx)(k,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:"rtl"===l.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===l.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":U(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(l.viewport){let o=l.viewport.scrollLeft+t.deltaX;e.onWheelScroll(o),function(e,t){return e>0&&e<t}(o,r)&&t.preventDefault()}},onResize:()=>{u.current&&l.viewport&&i&&n({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:V(i.paddingLeft),paddingEnd:V(i.paddingRight)}})}})}),C=o.forwardRef((e,t)=>{let{sizes:r,onSizesChange:n,...a}=e,l=E(w,e.__scopeScrollArea),[i,c]=o.useState(),u=o.useRef(null),d=(0,s.e)(t,u,l.onScrollbarYChange);return o.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),(0,p.jsx)(k,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:"ltr"===l.dir?0:void 0,left:"rtl"===l.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":U(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(l.viewport){let o=l.viewport.scrollTop+t.deltaY;e.onWheelScroll(o),function(e,t){return e>0&&e<t}(o,r)&&t.preventDefault()}},onResize:()=>{u.current&&l.viewport&&i&&n({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:V(i.paddingTop),paddingEnd:V(i.paddingBottom)}})}})}),[N,x]=h(w),k=o.forwardRef((e,t)=>{let{__scopeScrollArea:r,sizes:a,hasThumb:l,onThumbChange:c,onThumbPointerUp:u,onThumbPointerDown:f,onThumbPositionChange:h,onDragScroll:g,onWheelScroll:m,onResize:y,...v}=e,b=E(w,r),[_,I]=o.useState(null),S=(0,s.e)(t,e=>I(e)),T=o.useRef(null),R=o.useRef(""),A=b.viewport,C=a.content-a.viewport,x=(0,i.W)(m),k=(0,i.W)(h),D=Y(y,10);function O(e){T.current&&g({x:e.clientX-T.current.left,y:e.clientY-T.current.top})}return o.useEffect(()=>{let e=e=>{let t=e.target;_?.contains(t)&&x(e,C)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[A,_,C,x]),o.useEffect(k,[a,k]),$(_,D),$(b.content,D),(0,p.jsx)(N,{scope:r,scrollbar:_,hasThumb:l,onThumbChange:(0,i.W)(c),onThumbPointerUp:(0,i.W)(u),onThumbPositionChange:k,onThumbPointerDown:(0,i.W)(f),children:(0,p.jsx)(n.WV.div,{...v,ref:S,style:{position:"absolute",...v.style},onPointerDown:(0,d.M)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),T.current=_.getBoundingClientRect(),R.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),O(e))}),onPointerMove:(0,d.M)(e.onPointerMove,O),onPointerUp:(0,d.M)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=R.current,b.viewport&&(b.viewport.style.scrollBehavior=""),T.current=null})})})}),D="ScrollAreaThumb",O=o.forwardRef((e,t)=>{let{forceMount:r,...o}=e,n=x(D,e.__scopeScrollArea);return(0,p.jsx)(a.z,{present:r||n.hasThumb,children:(0,p.jsx)(L,{ref:t,...o})})}),L=o.forwardRef((e,t)=>{let{__scopeScrollArea:r,style:a,...l}=e,i=E(D,r),c=x(D,r),{onThumbPositionChange:u}=c,f=(0,s.e)(t,e=>c.onThumbChange(e)),h=o.useRef(void 0),g=Y(()=>{h.current&&(h.current(),h.current=void 0)},100);return o.useEffect(()=>{let e=i.viewport;if(e){let t=()=>{if(g(),!h.current){let t=J(e,u);h.current=t,u()}};return u(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,g,u]),(0,p.jsx)(n.WV.div,{"data-state":c.hasThumb?"visible":"hidden",...l,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:(0,d.M)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,o=e.clientY-t.top;c.onThumbPointerDown({x:r,y:o})}),onPointerUp:(0,d.M)(e.onPointerUp,c.onThumbPointerUp)})});O.displayName=D;var j="ScrollAreaCorner",P=o.forwardRef((e,t)=>{let r=E(j,e.__scopeScrollArea),o=!!(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&o?(0,p.jsx)(F,{...e,ref:t}):null});P.displayName=j;var F=o.forwardRef((e,t)=>{let{__scopeScrollArea:r,...a}=e,l=E(j,r),[s,i]=o.useState(0),[c,u]=o.useState(0),d=!!(s&&c);return $(l.scrollbarX,()=>{let e=l.scrollbarX?.offsetHeight||0;l.onCornerHeightChange(e),u(e)}),$(l.scrollbarY,()=>{let e=l.scrollbarY?.offsetWidth||0;l.onCornerWidthChange(e),i(e)}),d?(0,p.jsx)(n.WV.div,{...a,ref:t,style:{width:s,height:c,position:"absolute",right:"ltr"===l.dir?0:void 0,left:"rtl"===l.dir?0:void 0,bottom:0,...e.style}}):null});function V(e){return e?parseInt(e,10):0}function M(e,t){let r=e/t;return isNaN(r)?0:r}function U(e){let t=M(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function B(e,t,r="ltr"){let o=U(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-n,l=t.content-t.viewport,s=function(e,[t,r]){return Math.min(r,Math.max(t,e))}(e,"ltr"===r?[0,l]:[-1*l,0]);return W([0,l],[0,a-o])(s)}function W(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(r-e[0])}}var J=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},o=0;return function n(){let a={left:e.scrollLeft,top:e.scrollTop},l=r.left!==a.left,s=r.top!==a.top;(l||s)&&t(),r=a,o=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(o)};function Y(e,t){let r=(0,i.W)(e),n=o.useRef(0);return o.useEffect(()=>()=>window.clearTimeout(n.current),[]),o.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function $(e,t){let r=(0,i.W)(t);(0,u.b)(()=>{let t=0;if(e){let o=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return o.observe(e),()=>{window.cancelAnimationFrame(t),o.unobserve(e)}}},[e,r])}var z=y,H=b,X=P},6413:(e,t,r)=>{"use strict";let o;r.d(t,{RJ:()=>e6});var n,a,l,s,i=r(8964),c="vercel.ai.error",u=Symbol.for(c),d=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[n]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,c)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}};n=u;var p=d;function f(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}Symbol.for("vercel.ai.error.AI_APICallError"),Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError");var h="AI_InvalidArgumentError",g=`vercel.ai.error.${h}`,m=Symbol.for(g),E=class extends p{constructor({message:e,cause:t,argument:r}){super({name:h,message:e,cause:t}),this[a]=!0,this.argument=r}static isInstance(e){return p.hasMarker(e,g)}};a=m,Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError");var y="AI_JSONParseError",v=`vercel.ai.error.${y}`,b=Symbol.for(v),w=class extends p{constructor({text:e,cause:t}){super({name:y,message:`JSON parsing failed: Text: ${e}.
Error message: ${f(t)}`,cause:t}),this[l]=!0,this.text=e}static isInstance(e){return p.hasMarker(e,v)}};l=b,Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError");var _="AI_TypeValidationError",I=`vercel.ai.error.${_}`,S=Symbol.for(I),T=class e extends p{constructor({value:e,cause:t}){super({name:_,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${f(t)}`,cause:t}),this[s]=!0,this.value=e}static isInstance(e){return p.hasMarker(e,I)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}};function R(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(R):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&R(t)))}s=S,Symbol.for("vercel.ai.error.AI_UnsupportedFunctionalityError");let A=(e,t=21)=>(r=t)=>{let o="",n=0|r;for(;n--;)o+=e[Math.random()*e.length|0];return o};var C=r(9557),N=(({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:o="-"}={})=>{let n=A(r,t);if(null==e)return n;if(r.includes(o))throw new E({argument:"separator",message:`The separator "${o}" must not be part of the alphabet "${r}".`});return t=>`${e}${o}${n(t)}`})(),x=Symbol.for("vercel.ai.validator");function k({text:e,schema:t}){try{let r=C.parse(e);if(null==t)return{success:!0,value:r};return function({value:e,schema:t}){let r="object"==typeof t&&null!==t&&x in t&&!0===t[x]&&"validate"in t?t:{[x]:!0,validate:e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}};try{if(null==r.validate)return{success:!0,value:e};let t=r.validate(e);if(t.success)return t;return{success:!1,error:T.wrap({value:e,cause:t.error})}}catch(t){return{success:!1,error:T.wrap({value:e,cause:t})}}}({value:r,schema:t})}catch(t){return{success:!1,error:w.isInstance(t)?t:new w({text:e,cause:t})}}}var{btoa:D,atob:O}=globalThis;Symbol("Let zodToJsonSchema decide on which parser to use");let L=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};var j={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},P={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},F={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},V={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},M={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}};j.code,P.code,F.code,V.code,M.code,j.name,j.code,P.name,P.code,F.name,F.code,V.name,V.code,M.name,M.code,[j,P,F,V,M].map(e=>e.code);var U={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},B={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},W={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},J={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},Y={code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},$={code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},z={code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},H={code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},X={code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},K={code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},q={[U.code]:U,[B.code]:B,[W.code]:W,[J.code]:J,[Y.code]:Y,[$.code]:$,[z.code]:z,[H.code]:H,[X.code]:X,[K.code]:K};U.name,U.code,B.name,B.code,W.name,W.code,J.name,J.code,Y.name,Y.code,$.name,$.code,z.name,z.code,H.name,H.code,X.name,X.code,K.name,K.code;var G=[U,B,W,J,Y,$,z,H,X,K].map(e=>e.code),Q=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!G.includes(r))throw Error(`Failed to parse stream string. Invalid code ${r}.`);let o=JSON.parse(e.slice(t+1));return q[r].parse(o)};async function Z({stream:e,onTextPart:t,onDataPart:r,onErrorPart:o,onToolCallStreamingStartPart:n,onToolCallDeltaPart:a,onToolCallPart:l,onToolResultPart:s,onMessageAnnotationsPart:i,onFinishMessagePart:c,onFinishStepPart:u}){let d=e.getReader(),p=new TextDecoder,f=[],h=0;for(;;){let{value:e}=await d.read();if(e&&(f.push(e),h+=e.length,10!==e[e.length-1]))continue;if(0===f.length)break;let g=function(e,t){let r=new Uint8Array(t),o=0;for(let t of e)r.set(t,o),o+=t.length;return e.length=0,r}(f,h);for(let{type:e,value:d}of(h=0,p.decode(g,{stream:!0}).split("\n").filter(e=>""!==e).map(Q)))switch(e){case"text":await (null==t?void 0:t(d));break;case"data":await (null==r?void 0:r(d));break;case"error":await (null==o?void 0:o(d));break;case"message_annotations":await (null==i?void 0:i(d));break;case"tool_call_streaming_start":await (null==n?void 0:n(d));break;case"tool_call_delta":await (null==a?void 0:a(d));break;case"tool_call":await (null==l?void 0:l(d));break;case"tool_result":await (null==s?void 0:s(d));break;case"finish_message":await (null==c?void 0:c(d));break;case"finish_step":await (null==u?void 0:u(d));break;default:throw Error(`Unknown stream part type: ${e}`)}}}async function ee({stream:e,update:t,onToolCall:r,onFinish:o,generateId:n=N,getCurrentDate:a=()=>new Date}){let l,s;let i=a(),c=!0,u=[],d=[],p={},f={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},h="unknown";function g(){let e=[...d];if(null==l){t(u,e);return}(null==s?void 0:s.length)&&(l.annotations=s),t([...u,{...JSON.parse(JSON.stringify(l)),revisionId:n(),createdAt:l.createdAt}],e)}function m(){return(c||null==l)&&(null!=l&&u.push(l),c=!1,l={id:n(),role:"assistant",content:"",createdAt:i}),l}await Z({stream:e,onTextPart(e){let t=m();l={...t,content:t.content+e},g()},onToolCallStreamingStartPart(e){let t=m();null==t.toolInvocations&&(t.toolInvocations=[]),p[e.toolCallId]={text:"",toolName:e.toolName,index:t.toolInvocations.length},t.toolInvocations.push({state:"partial-call",toolCallId:e.toolCallId,toolName:e.toolName,args:void 0}),g()},onToolCallDeltaPart(e){let t=m(),r=p[e.toolCallId];r.text+=e.argsTextDelta;let{value:o}=function(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=k({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=k({text:function(e){let t=["ROOT"],r=-1,o=null;function n(e,n,a){switch(e){case'"':r=n,t.pop(),t.push(a),t.push("INSIDE_STRING");break;case"f":case"t":case"n":r=n,o=n,t.pop(),t.push(a),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(a),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=n,t.pop(),t.push(a),t.push("INSIDE_NUMBER");break;case"{":r=n,t.pop(),t.push(a),t.push("INSIDE_OBJECT_START");break;case"[":r=n,t.pop(),t.push(a),t.push("INSIDE_ARRAY_START")}}function a(e,o){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":r=o,t.pop()}}function l(e,o){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=o,t.pop()}}for(let s=0;s<e.length;s++){let i=e[s];switch(t[t.length-1]){case"ROOT":n(i,s,"FINISH");break;case"INSIDE_OBJECT_START":switch(i){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":r=s,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===i&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===i&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===i&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":n(i,s,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":a(i,s);break;case"INSIDE_STRING":switch(i){case'"':t.pop(),r=s;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:r=s}break;case"INSIDE_ARRAY_START":"]"===i?(r=s,t.pop()):(r=s,n(i,s,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(i){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=s,t.pop();break;default:r=s}break;case"INSIDE_ARRAY_AFTER_COMMA":n(i,s,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),r=s;break;case"INSIDE_NUMBER":switch(i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=s;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&l(i,s),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&a(i,s);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&a(i,s);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&l(i,s);break;default:t.pop()}break;case"INSIDE_LITERAL":{let n=e.substring(o,s+1);"false".startsWith(n)||"true".startsWith(n)||"null".startsWith(n)?r=s:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?a(i,s):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&l(i,s))}}}let s=e.slice(0,r+1);for(let r=t.length-1;r>=0;r--)switch(t[r]){case"INSIDE_STRING":s+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":s+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":s+="]";break;case"INSIDE_LITERAL":{let t=e.substring(o,e.length);"true".startsWith(t)?s+="true".slice(t.length):"false".startsWith(t)?s+="false".slice(t.length):"null".startsWith(t)&&(s+="null".slice(t.length))}}return s}(e)})).success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}(r.text);t.toolInvocations[r.index]={state:"partial-call",toolCallId:e.toolCallId,toolName:r.toolName,args:o},g()},async onToolCallPart(e){let t=m();if(null!=p[e.toolCallId]?t.toolInvocations[p[e.toolCallId].index]={state:"call",...e}:(null==t.toolInvocations&&(t.toolInvocations=[]),t.toolInvocations.push({state:"call",...e})),r){let o=await r({toolCall:e});null!=o&&(t.toolInvocations[t.toolInvocations.length-1]={state:"result",...e,result:o})}g()},onToolResultPart(e){let t=m().toolInvocations;if(null==t)throw Error("tool_result must be preceded by a tool_call");let r=t.findIndex(t=>t.toolCallId===e.toolCallId);if(-1===r)throw Error("tool_result must be preceded by a tool_call with the same toolCallId");t[r]={...t[r],state:"result",...e},g()},onDataPart(e){d.push(...e),g()},onMessageAnnotationsPart(e){null==s?s=[...e]:s.push(...e),g()},onFinishStepPart(e){c=!e.isContinued},onFinishMessagePart(e){h=e.finishReason,null!=e.usage&&(f=function({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}(e.usage))},onErrorPart(e){throw Error(e)}}),null==o||o({message:l,finishReason:h,usage:f})}async function et({stream:e,onTextPart:t}){let r=e.pipeThrough(new TextDecoderStream).getReader();for(;;){let{done:e,value:o}=await r.read();if(e)break;await t(o)}}var er=()=>fetch;async function eo({api:e,body:t,streamProtocol:r="data",credentials:o,headers:n,abortController:a,restoreMessagesOnFailure:l,onResponse:s,onUpdate:i,onFinish:c,onToolCall:u,generateId:d,fetch:p=er()}){var f,h;let g=await p(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...n},signal:null==(f=null==a?void 0:a())?void 0:f.signal,credentials:o}).catch(e=>{throw l(),e});if(s)try{await s(g)}catch(e){throw e}if(!g.ok)throw l(),Error(null!=(h=await g.text())?h:"Failed to fetch the chat response.");if(!g.body)throw Error("The response body is empty.");switch(r){case"text":{let e={id:d(),createdAt:new Date,role:"assistant",content:""};await et({stream:g.body,onTextPart:t=>{e.content+=t,i([{...e}],[])}}),null==c||c(e,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"});return}case"data":await ee({stream:g.body,update:i,onToolCall:u,onFinish({message:e,finishReason:t,usage:r}){c&&null!=e&&c(e,{usage:r,finishReason:t})},generateId:d});return;default:throw Error(`Unknown stream protocol: ${r}`)}}async function en(e){if(!e)return[];if(e instanceof FileList)return Promise.all(Array.from(e).map(async e=>{let{name:t,type:r}=e;return{name:t,contentType:r,url:await new Promise((t,r)=>{let o=new FileReader;o.onload=e=>{var r;t(null==(r=e.target)?void 0:r.result)},o.onerror=e=>r(e),o.readAsDataURL(e)})}}));if(Array.isArray(e))return e;throw Error("Invalid attachments type")}Symbol.for("vercel.ai.schema");var ea=r(4455),el=Object.prototype.hasOwnProperty;let es=new WeakMap,ei=()=>{},ec=ei(),eu=Object,ed=e=>e===ec,ep=e=>"function"==typeof e,ef=(e,t)=>({...e,...t}),eh=e=>ep(e.then),eg={},em={},eE="undefined"!=typeof document,ey=()=>!1,ev=(e,t)=>{let r=es.get(e);return[()=>!ed(t)&&e.get(t)||eg,o=>{if(!ed(t)){let n=e.get(t);t in em||(em[t]=n),r[5](t,ef(n,o),n||eg)}},r[6],()=>!ed(t)&&t in em?em[t]:!ed(t)&&e.get(t)||eg]},eb=!0,[ew,e_]=[ei,ei],eI={initFocus:e=>(eE&&document.addEventListener("visibilitychange",e),ew("focus",e),()=>{eE&&document.removeEventListener("visibilitychange",e),e_("focus",e)}),initReconnect:e=>{let t=()=>{eb=!0,e()},r=()=>{eb=!1};return ew("online",t),ew("offline",r),()=>{e_("online",t),e_("offline",r)}}},eS=!i.useId,eT=e=>ey()?window.requestAnimationFrame(e):setTimeout(e,1),eR=(0,i.useEffect),eA="undefined"!=typeof navigator&&navigator.connection,eC=false,eN=new WeakMap,ex=(e,t)=>eu.prototype.toString.call(e)===`[object ${t}]`,ek=0,eD=e=>{let t,r;let o=typeof e,n=ex(e,"Date"),a=ex(e,"RegExp"),l=ex(e,"Object");if(eu(e)!==e||n||a)t=n?e.toJSON():"symbol"==o?e.toString():"string"==o?JSON.stringify(e):""+e;else{if(t=eN.get(e))return t;if(t=++ek+"~",eN.set(e,t),Array.isArray(e)){for(r=0,t="@";r<e.length;r++)t+=eD(e[r])+",";eN.set(e,t)}if(l){t="#";let o=eu.keys(e).sort();for(;!ed(r=o.pop());)ed(e[r])||(t+=r+":"+eD(e[r])+",");eN.set(e,t)}}return t},eO=e=>{if(ep(e))try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?eD(e):"",t]},eL=0,ej=()=>++eL;var eP={ERROR_REVALIDATE_EVENT:3,FOCUS_EVENT:0,MUTATE_EVENT:2,RECONNECT_EVENT:1};async function eF(...e){let[t,r,o,n]=e,a=ef({populateCache:!0,throwOnError:!0},"boolean"==typeof n?{revalidate:n}:n||{}),l=a.populateCache,s=a.rollbackOnError,i=a.optimisticData,c=e=>"function"==typeof s?s(e):!1!==s,u=a.throwOnError;if(ep(r)){let e=[];for(let o of t.keys())!/^\$(inf|sub)\$/.test(o)&&r(t.get(o)._k)&&e.push(o);return Promise.all(e.map(d))}return d(r);async function d(r){let n;let[s]=eO(r);if(!s)return;let[d,p]=ev(t,s),[f,h,g,m]=es.get(t),E=()=>{let e=f[s];return(ep(a.revalidate)?a.revalidate(d().data,r):!1!==a.revalidate)&&(delete g[s],delete m[s],e&&e[0])?e[0](2).then(()=>d().data):d().data};if(e.length<3)return E();let y=o,v=ej();h[s]=[v,0];let b=!ed(i),w=d(),_=w.data,I=w._c,S=ed(I)?_:I;if(b&&p({data:i=ep(i)?i(S,_):i,_c:S}),ep(y))try{y=y(S)}catch(e){n=e}if(y&&eh(y)){if(y=await y.catch(e=>{n=e}),v!==h[s][0]){if(n)throw n;return y}n&&b&&c(n)&&(l=!0,p({data:S,_c:ec}))}if(l&&!n&&(ep(l)?p({data:l(y,S),error:ec,_c:ec}):p({data:y,error:ec,_c:ec})),h[s][1]=ej(),Promise.resolve(E()).then(()=>{p({_c:ec})}),n){if(u)throw n;return}return y}}let eV=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},eM=(e,t)=>{if(!es.has(e)){let r=ef(eI,t),o={},n=eF.bind(ec,e),a=ei,l={},s=(e,t)=>{let r=l[e]||[];return l[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},i=(t,r,o)=>{e.set(t,r);let n=l[t];if(n)for(let e of n)e(r,o)},c=()=>{!es.has(e)&&es.set(e,[o,{},{},{},n,i,s])};return c(),[e,n,c,a]}return[e,es.get(e)[4]]},[eU,eB]=eM(new Map),eW=ef({onLoadingSlow:ei,onSuccess:ei,onError:ei,onErrorRetry:(e,t,r,o,n)=>{let a=r.errorRetryCount,l=n.retryCount,s=~~((Math.random()+.5)*(1<<(l<8?l:8)))*r.errorRetryInterval;(ed(a)||!(l>a))&&setTimeout(o,s,n)},onDiscarded:ei,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:eC?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:eC?5e3:3e3,compare:function e(t,r){var o,n;if(t===r)return!0;if(t&&r&&(o=t.constructor)===r.constructor){if(o===Date)return t.getTime()===r.getTime();if(o===RegExp)return t.toString()===r.toString();if(o===Array){if((n=t.length)===r.length)for(;n--&&e(t[n],r[n]););return -1===n}if(!o||"object"==typeof t){for(o in n=0,t)if(el.call(t,o)&&++n&&!el.call(r,o)||!(o in r)||!e(t[o],r[o]))return!1;return Object.keys(r).length===n}}return t!=t&&r!=r},isPaused:()=>!1,cache:eU,mutate:eB,fallback:{}},{isOnline:()=>eb,isVisible:()=>{let e=eE&&document.visibilityState;return ed(e)||"hidden"!==e}}),eJ=(e,t)=>{let r=ef(e,t);if(t){let{use:o,fallback:n}=e,{use:a,fallback:l}=t;o&&a&&(r.use=o.concat(a)),n&&l&&(r.fallback=ef(n,l))}return r},eY=(0,i.createContext)({}),e$=[],ez=e=>ep(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],eH=()=>ef(eW,(0,i.useContext)(eY)),eX=e$.concat(e=>(t,r,o)=>{let n=r&&((...e)=>{let[o]=eO(t),[,,,n]=es.get(eU);if(o.startsWith("$inf$"))return r(...e);let a=n[o];return ed(a)?r(...e):(delete n[o],a)});return e(t,n,o)}),eK=(e,t,r)=>{let o=t[e]||(t[e]=[]);return o.push(r),()=>{let e=o.indexOf(r);e>=0&&(o[e]=o[o.length-1],o.pop())}},eq=()=>{};eq(),new WeakMap;let eG=i.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),eQ={dedupe:!0};eu.defineProperty(e=>{let{value:t}=e,r=(0,i.useContext)(eY),o=ep(t),n=(0,i.useMemo)(()=>o?t(r):t,[o,r,t]),a=(0,i.useMemo)(()=>o?n:eJ(r,n),[o,r,n]),l=n&&n.provider,s=(0,i.useRef)(ec);l&&!s.current&&(s.current=eM(l(a.cache||eU),n));let c=s.current;return c&&(a.cache=c[0],a.mutate=c[1]),eR(()=>{if(c)return c[2]&&c[2](),c[3]},[]),(0,i.createElement)(eY.Provider,ef(e,{value:a}))},"defaultValue",{value:eW});let eZ=(o=(e,t,r)=>{let{cache:o,compare:n,suspense:a,fallbackData:l,revalidateOnMount:s,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:p,keepPreviousData:f}=r,[h,g,m,E]=es.get(o),[y,v]=eO(e),b=(0,i.useRef)(!1),w=(0,i.useRef)(!1),_=(0,i.useRef)(y),I=(0,i.useRef)(t),S=(0,i.useRef)(r),T=()=>S.current,R=()=>T().isVisible()&&T().isOnline(),[A,C,N,x]=ev(o,y),k=(0,i.useRef)({}).current,D=ed(l)?ed(r.fallback)?ec:r.fallback[y]:l,O=(e,t)=>{for(let r in k)if("data"===r){if(!n(e[r],t[r])&&(!ed(e[r])||!n(W,t[r])))return!1}else if(t[r]!==e[r])return!1;return!0},L=(0,i.useMemo)(()=>{let e=!!y&&!!t&&(ed(s)?!T().isPaused()&&!a&&!1!==c:s),r=t=>{let r=ef(t);return(delete r._k,e)?{isValidating:!0,isLoading:!0,...r}:r},o=A(),n=x(),l=r(o),i=o===n?l:r(n),u=l;return[()=>{let e=r(A());return O(e,u)?(u.data=e.data,u.isLoading=e.isLoading,u.isValidating=e.isValidating,u.error=e.error,u):(u=e,e)},()=>i]},[o,y]),j=(0,ea.useSyncExternalStore)((0,i.useCallback)(e=>N(y,(t,r)=>{O(r,t)||e()}),[o,y]),L[0],L[1]),P=!b.current,F=h[y]&&h[y].length>0,V=j.data,M=ed(V)?D&&eh(D)?eG(D):D:V,U=j.error,B=(0,i.useRef)(M),W=f?ed(V)?B.current:V:M,J=(!F||!!ed(U))&&(P&&!ed(s)?s:!T().isPaused()&&(a?!ed(M)&&c:ed(M)||c)),Y=!!(y&&t&&P&&J),$=ed(j.isValidating)?Y:j.isValidating,z=ed(j.isLoading)?Y:j.isLoading,H=(0,i.useCallback)(async e=>{let t,o;let a=I.current;if(!y||!a||w.current||T().isPaused())return!1;let l=!0,s=e||{},i=!m[y]||!s.dedupe,c=()=>eS?!w.current&&y===_.current&&b.current:y===_.current,u={isValidating:!1,isLoading:!1},d=()=>{C(u)},p=()=>{let e=m[y];e&&e[1]===o&&delete m[y]},f={isValidating:!0};ed(A().data)&&(f.isLoading=!0);try{if(i&&(C(f),r.loadingTimeout&&ed(A().data)&&setTimeout(()=>{l&&c()&&T().onLoadingSlow(y,r)},r.loadingTimeout),m[y]=[a(v),ej()]),[t,o]=m[y],t=await t,i&&setTimeout(p,r.dedupingInterval),!m[y]||m[y][1]!==o)return i&&c()&&T().onDiscarded(y),!1;u.error=ec;let e=g[y];if(!ed(e)&&(o<=e[0]||o<=e[1]||0===e[1]))return d(),i&&c()&&T().onDiscarded(y),!1;let s=A().data;u.data=n(s,t)?s:t,i&&c()&&T().onSuccess(t,y,r)}catch(r){p();let e=T(),{shouldRetryOnError:t}=e;!e.isPaused()&&(u.error=r,i&&c()&&(e.onError(r,y,e),(!0===t||ep(t)&&t(r))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||R())&&e.onErrorRetry(r,y,e,e=>{let t=h[y];t&&t[0]&&t[0](eP.ERROR_REVALIDATE_EVENT,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0})))}return l=!1,d(),!0},[y,o]),X=(0,i.useCallback)((...e)=>eF(o,_.current,...e),[]);if(eR(()=>{I.current=t,S.current=r,ed(V)||(B.current=V)}),eR(()=>{if(!y)return;let e=H.bind(ec,eQ),t=0,r=eK(y,h,(r,o={})=>{if(r==eP.FOCUS_EVENT){let r=Date.now();T().revalidateOnFocus&&r>t&&R()&&(t=r+T().focusThrottleInterval,e())}else if(r==eP.RECONNECT_EVENT)T().revalidateOnReconnect&&R()&&e();else if(r==eP.MUTATE_EVENT)return H();else if(r==eP.ERROR_REVALIDATE_EVENT)return H(o)});return w.current=!1,_.current=y,b.current=!0,C({_k:v}),J&&(ed(M),e()),()=>{w.current=!0,r()}},[y]),eR(()=>{let e;function t(){let t=ep(u)?u(A().data):u;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!A().error&&(d||T().isVisible())&&(p||T().isOnline())?H(eQ).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[u,d,p,y]),(0,i.useDebugValue)(W),a&&ed(M)&&y){if(!eS)throw Error("Fallback data is required when using Suspense in SSR.");I.current=t,S.current=r,w.current=!1;let e=E[y];if(ed(e)||eG(X(e)),ed(U)){let e=H(eQ);ed(W)||(e.status="fulfilled",e.value=!0),eG(e)}else throw U}return{mutate:X,get data(){return k.data=!0,W},get error(){return k.error=!0,U},get isValidating(){return k.isValidating=!0,$},get isLoading(){return k.isLoading=!0,z}}},function(...e){let t=eH(),[r,n,a]=ez(e),l=eJ(t,a),s=o,{use:i}=l,c=(i||[]).concat(eX);for(let e=c.length;e--;)s=c[e](s);return s(r,n||l.fetcher||null,l)});var e0=r(4895);function e1(e,t){return null!=t?e0(e,t):e}var e5=async(e,t,r,o,n,a,l,s,i,c,u,d,p,f,h,g,m)=>{var E;let y=l.current;r(t.messages,!1);let v=f?t.messages:t.messages.map(({role:e,content:t,experimental_attachments:r,data:o,annotations:n,toolInvocations:a})=>({role:e,content:t,...void 0!==r&&{experimental_attachments:r},...void 0!==o&&{data:o},...void 0!==n&&{annotations:n},...void 0!==a&&{toolInvocations:a}})),b=n.current;return await eo({api:e,body:null!=(E=null==h?void 0:h({messages:t.messages,requestData:t.data,requestBody:t.body}))?E:{messages:v,data:t.data,...a.current.body,...t.body},streamProtocol:c,credentials:a.current.credentials,headers:{...a.current.headers,...t.headers},abortController:()=>s.current,restoreMessagesOnFailure(){m||r(y,!1)},onResponse:d,onUpdate(e,n){r([...t.messages,...e],!1),(null==n?void 0:n.length)&&o([...null!=b?b:[],...n],!1)},onToolCall:p,onFinish:u,generateId:i,fetch:g})};function e4(e){return"assistant"===e.role&&e.toolInvocations&&e.toolInvocations.length>0&&e.toolInvocations.every(e=>"result"in e)}var e6=function({api:e="/api/chat",id:t,initialMessages:r,initialInput:o="",sendExtraMessageFields:n,onToolCall:a,experimental_prepareRequestBody:l,maxSteps:s=1,streamProtocol:c="data",onResponse:u,onFinish:d,onError:p,credentials:f,headers:h,body:g,generateId:m=N,fetch:E,keepLastMessageOnError:y=!0,experimental_throttle:v}={}){let b=(0,i.useId)(),w=null!=t?t:b,_="string"==typeof e?[e,w]:w,[I]=(0,i.useState)([]),{data:S,mutate:T}=eZ([_,"messages"],null,{fallbackData:null!=r?r:I}),R=(0,i.useRef)(S||[]);(0,i.useEffect)(()=>{R.current=S||[]},[S]);let{data:A,mutate:C}=eZ([_,"streamData"],null),x=(0,i.useRef)(A);(0,i.useEffect)(()=>{x.current=A},[A]);let{data:k=!1,mutate:D}=eZ([_,"loading"],null),{data:O,mutate:L}=eZ([_,"error"],null),j=(0,i.useRef)(null),P=(0,i.useRef)({credentials:f,headers:h,body:g});(0,i.useEffect)(()=>{P.current={credentials:f,headers:h,body:g}},[f,h,g]);let F=(0,i.useCallback)(async t=>{let r=R.current.length;try{D(!0),L(void 0);let r=new AbortController;j.current=r,await e5(e,t,e1(T,v),e1(C,v),x,P,R,j,m,c,d,u,a,n,l,E,y),j.current=null}catch(e){if("AbortError"===e.name)return j.current=null,null;p&&e instanceof Error&&p(e),L(e)}finally{D(!1)}let o=R.current,i=o[o.length-1];o.length>r&&null!=i&&s>1&&e4(i)&&function(e){let t=0;for(let r=e.length-1;r>=0;r--)if("assistant"===e[r].role)t++;else break;return t}(o)<s&&await F({messages:o})},[T,D,e,P,u,d,p,L,C,x,c,n,l,a,s,R,j,m,E,y,v]),V=(0,i.useCallback)(async(e,{data:t,headers:r,body:o,experimental_attachments:n}={})=>{var a,l;let s=await en(n);return F({messages:R.current.concat({...e,id:null!=(a=e.id)?a:m(),createdAt:null!=(l=e.createdAt)?l:new Date,experimental_attachments:s.length>0?s:void 0}),headers:r,body:o,data:t})},[F,m]),M=(0,i.useCallback)(async({data:e,headers:t,body:r}={})=>{let o=R.current;return 0===o.length?null:F({messages:"assistant"===o[o.length-1].role?o.slice(0,-1):o,headers:t,body:r,data:e})},[F]),U=(0,i.useCallback)(()=>{j.current&&(j.current.abort(),j.current=null)},[]),B=(0,i.useCallback)(e=>{"function"==typeof e&&(e=e(R.current)),T(e,!1),R.current=e},[T]),W=(0,i.useCallback)(e=>{"function"==typeof e&&(e=e(x.current)),C(e,!1),x.current=e},[C]),[J,Y]=(0,i.useState)(o),$=(0,i.useCallback)(async(e,t={},r)=>{var o;if(null==(o=null==e?void 0:e.preventDefault)||o.call(e),!J&&!t.allowEmptySubmit)return;r&&(P.current={...P.current,...r});let n=await en(t.experimental_attachments);F({messages:J||n.length||!t.allowEmptySubmit?R.current.concat({id:m(),createdAt:new Date,role:"user",content:J,experimental_attachments:n.length>0?n:void 0}):R.current,headers:t.headers,body:t.body,data:t.data}),Y("")},[J,m,F]);return{messages:S||[],setMessages:B,data:A,setData:W,error:O,append:V,reload:M,stop:U,input:J,setInput:Y,handleInputChange:e=>{Y(e.target.value)},handleSubmit:$,isLoading:k,addToolResult:({toolCallId:e,result:t})=>{let r=R.current.map((r,o,n)=>o===n.length-1&&"assistant"===r.role&&r.toolInvocations?{...r,toolInvocations:r.toolInvocations.map(r=>r.toolCallId===e?{...r,result:t,state:"result"}:r)}:r);T(r,!1),e4(r[r.length-1])&&F({messages:r})}}}}};